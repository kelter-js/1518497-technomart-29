const contactUsModal=document.querySelector(".modal-contact-us"),closeButtons=document.querySelectorAll(".close-modal"),contactUsButton=document.querySelector(".contacts .button"),map=document.querySelector(".map-button"),modalMap=document.querySelector(".modal-map"),mapImage=document.querySelector(".map-button img"),promoParent=document.querySelector(".promo-block-carousel"),serviceParent=document.querySelector(".service-list-description-wrapper"),addToCartButtons=document.querySelectorAll(".goods-buy-button"),innerModalSuccesAdded=document.querySelector(".modal-cart"),closeButton=document.querySelector(".close-modal");let isStorageSupported=!0,storageName="",storageUserEmail="";try{storageName=localStorage.getItem("name"),storageUserEmail=localStorage.getItem("mail")}catch(e){isStorageSupported=!1}if(contactUsButton){const e=contactUsModal.querySelector(".modal .modal-form"),t=contactUsModal.querySelector(".first-form-input"),o=contactUsModal.querySelector(".second-form-input"),s=contactUsModal.querySelector(".third-form-input");contactUsButton.addEventListener("click",function(e){e.preventDefault(),contactUsModal.classList.toggle("make-visible"),storageName&&storageUserEmail?(t.value=storageName,o.value=storageUserEmail,s.focus()):t.focus()}),e.addEventListener("submit",function(e){t.value&&o.value&&s.value?isStorageSupported&&(localStorage.setItem("name",t.value),localStorage.setItem("mail",o.value)):(e.preventDefault(),contactUsModal.classList.remove("modal-error"),contactUsModal.offsetWidth=contactUsModal.offsetWidth,contactUsModal.classList.add("modal-error"))}),document.addEventListener("click",function(e){let t=e.target,o=t==contactUsModal||contactUsModal.contains(t),s=t==contactUsButton,a=contactUsModal.classList.contains("make-visible");o||!a||s||(contactUsModal.classList.toggle("make-visible"),contactUsModal.classList.remove("modal-error"))})}for(i=0;i<closeButtons.length;i++)closeButtons[i].addEventListener("click",function(){this.parentElement.classList.remove("make-visible"),this.parentElement.classList.contains("modal-error")&&this.parentElement.classList.remove("modal-error")});if(document.addEventListener("keydown",function(e){if("Escape"==e.code){let e=document.querySelector(".make-visible");e.classList.remove("make-visible"),e.classList.contains("modal-error")&&e.classList.remove("modal-error")}}),map&&(map.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.toggle("make-visible")}),document.addEventListener("click",function(e){let t=e.target,o=t==modalMap||modalMap.contains(t),s=t==map,a=t==mapImage,c=modalMap.classList.contains("make-visible");o||!c||s||a||modalMap.classList.toggle("make-visible")})),promoParent&&serviceParent){const e=promoParent.querySelector(".perf"),t=promoParent.querySelector(".drill"),o=promoParent.querySelector(".promo-block-carousel .first-slide"),s=promoParent.querySelector(".promo-block-carousel .second-slide"),a=serviceParent.querySelector(".delivery"),c=serviceParent.querySelector(".credit"),r=serviceParent.querySelector(".guarantee");promoParent.addEventListener("click",function(a){"BUTTON"==a.target.tagName&&(e.classList.toggle("current-slide"),t.classList.toggle("current-slide"),o.classList.toggle("current"),s.classList.toggle("current"))}),serviceParent.addEventListener("click",function(e){e.preventDefault();let t=e.target;t.parentElement.classList.contains("services-list-item")&&(serviceParent.querySelector(".selected-service").classList.remove("selected-service"),t.closest("li").classList.add("selected-service"),t.classList.contains("credit-link")?(serviceParent.querySelector(".current-slide").classList.remove("current-slide"),c.classList.add("current-slide")):t.classList.contains("guarantee-link")?(serviceParent.querySelector(".current-slide").classList.remove("current-slide"),r.classList.add("current-slide")):(serviceParent.querySelector(".current-slide").classList.remove("current-slide"),a.classList.add("current-slide")))})}if(innerModalSuccesAdded){innerModalSuccesAdded.querySelector(".button-keep-shopping").addEventListener("click",function(){innerModalSuccesAdded.classList.remove("make-visible")});for(let e=0;e<addToCartButtons.length;e++)addToCartButtons[e].addEventListener("click",function(){innerModalSuccesAdded.classList.toggle("make-visible")});document.addEventListener("click",function(e){let t=e.target,o=t==innerModalSuccesAdded||innerModalSuccesAdded.contains(t),s=Array.from(addToCartButtons).includes(t),a=innerModalSuccesAdded.classList.contains("make-visible");o||!a||s||innerModalSuccesAdded.classList.toggle("make-visible")})}
